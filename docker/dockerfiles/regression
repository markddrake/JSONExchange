FROM yadamu/base:latest
WORKDIR /usr/src/YADAMU
COPY qa/bin qa/bin
COPY qa/mappings qa/mappings
COPY qa/regression qa/regression
COPY qa/sql qa/sql
COPY qa/cmdLine qa/cmdLine
COPY docker/regression/bin bin
COPY docker/regression/tnsnames.ora .
COPY docker/regression/connections.json qa/regression
RUN mkdir -p mnt/log \
 &&	mkdir -p mnt/JSON \
 && mkdir -p mnt/tests \ 
 &&	mkdir -p mnt/work \	
 &&	mkdir -p mnt/output \	
 &&	mkdir -p mnt/loader \	
 &&	mkdir -p mnt/local \	
 &&	mkdir -p mnt/yadamu \	
 && ln -sfn mnt/log \
 && ln -sfn mnt/JSON \
 && ln -sfn mnt/tests \
 && ln -sfn mnt/work \
 && ln -sfn mnt/output \
 && ln -sfn mnt/loader \
 && ln -sfn mnt/local \
 && ln -sfn mnt/yadamu 
ENV TNS_ADMIN=/usr/src/YADAMU
ENV YADAMU_PASSPHRASE=yabasc
ENTRYPOINT ["/bin/bash", "/usr/src/YADAMU/bin/chooseTest.sh", "$YADAMU_TEST_NAME"]